#!/bin/bash

# ุทุจุงุนุฉ ูุณุจุฉ ุงุณุชููุงู ุงููุนุงูุฌ ูุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ

get_load() {
    cpu_last=($(head -n1 /proc/stat))
    cpu_last_sum="${cpu_last[@]:1}"
    cpu_last_sum=$((${cpu_last_sum// /+}))

    sleep 0.05

    cpu_now=($(head -n1 /proc/stat))
    cpu_sum="${cpu_now[@]:1}"
    cpu_sum=$((${cpu_sum// /+}))

    cpu_delta=$((cpu_sum - cpu_last_sum))
    cpu_idle=$((cpu_now[4] - cpu_last[4]))
    cpu_used=$((cpu_delta - cpu_idle))

    cpu_usage=$(awk "BEGIN {printf \"%4.1f\", ($cpu_used/$cpu_delta) * 100}")
}

get_temp() {
    temp=$(sensors | awk '/Core/ {sum+=$3; count++} END {if (count > 0) printf "๐ก %.1fยฐC", sum/count}')
}

# ุชูููุฐ ุงููุธููุชูู ูุนูุง
get_load
get_temp

# ุทุจุงุนุฉ ุงููุชูุฌุฉ ูุนูุง
echo "CPU:${cpu_usage}% - ${temp}"

